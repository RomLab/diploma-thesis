\chapter{Závěr}
Podle zadání diplomové práce se povedly splnit všechny body. Cílem práce bylo prostudovat problematiku zónového podlahového vytápění a navrhnout vlastní řešení pro řízení dílčích částí systému. Byl navržen koncept centrální jednotky a dalších částí pro zónovou regulaci vytápění. Byl navržen koncept komunikace centrální jednotky, lokálních \acrshort{nspt} a~akčních členů pro řízení jednotlivých otopných okruhů. Na základě konceptu byla zvolena centrální jednotka, navržena jednotlivá zařízení pro dané části systému, včetně jejich mechanického umístění a ochranných krabiček. Některé části byly zakoupeny hotové a~případně došlo k jejich upravě. V~rámci problematiky POE byl navržen DC/DC měnič pro PSE zařízení. Dalším splněným bodem zadání je zvolená vhodná komunikace a zejména jednoduchá rozšiřitelnost. Na centrální jednotce funguje open-source řídicí systém pro domácí automatizaci. Tento systém je neustále rozšiřován a aktualizován vývojářskou komunitou. Má již mnoho integrovaných částí pro řízení vytápění. V~rámci komunikace mezi centrální jednotkou a \acrshort{nspt} byla zvolena komunikace pomocí MQTT, která je snadno nastavitelná a snadno rozšiřitelná. Mezi centrální jednotkou a akčními členy se využívá standardní I$^2$C sběrnice s úpravou na delší vzdálenosti. Teplotní senzory jsou připojené na 1-Wire sběrnici. Byly zhotoveny \acrshort{nspt} do jednotlivých místností ve verzi s POE a WiFi s napájením pomocí síťového adaptéru. Pro \acrshort{nspt} byla navržena a zhotovena krabička pomocí 3D tiskárny. Pro ovládání jednotlivých otopných okruhů bylo zhotoveno vlastní řešení s využitím zakoupených termoelektrických pohonů. V rámci celého systému se využívá automatizovaná část (inteligentní část) spočívající využívání teplotních plánů s možností jejich modifikování na základě teplotní predikce. Využívají se nasbíraná data z~jednotlivých místností v~rámci vytápění a na základě nich se sestavuje velmi jednoduchá lineární predikci s předpovědí počasí pro úpravu časových teplotních úseků, aby v~požadovaný čas bylo dosaženo požadované teploty. Dále se využívá softwarová detekce otevřeného okna pro pozastavení vytápění v případě otevření okna. Vše bylo následně otestováno a je nasazeno v rodinném domě. Systém se dá neustále rozšiřovat pro případné požadované úpravy. Vše tak bylo upravováno podle požadavků uživatelů domácnosti. 

Celý systém řízení se postupně vyvíjel. Původně bylo řízení vytápění podle chodbových termostatů a nepočítalo se se zónovým řízením podlahového vytápění na které se následně přešlo. Majitel domu chtěl primárně veškeré řešení drátové. Proto se nakonec vymýšlelo, jak rozvést kabely do jednotlivých místností. Vznikly primárně POE \acrshort{nspt}, využilo se půdy pro rozvedení UTP kabelu do všech místností, kde to bylo možné a~zároveň nebyla ničena estetika místnosti. Pro místnosti, kde to nebylo možné, byly navrženy bezdrátové moduly (WiFi) s~napájením ze síťových adaptérů, aby nebylo nutné se starat o výměnu baterií, požadavek majitele. Na verzi s POE jsou poněkud vyšší náklady na součástky, nicméně ty nejdražší součástky mi zaslali výrobci jako vzorek. Jistou nevýhodou mohou být bezdrátové moduly z~pohledu bezdrátové komunikace a případných výpadků. Vzhledem k dobrému pokrytí WiFi sítě v~domě je komunikace bezproblémová.

DPS pro vstupy/výstup u centrální jednotky, I$^{2}$C rozdělovač, DPS pro signalizaci u krbů a~DPS v rozdělovačích pro podlahové vytápění byly ručně vyráběny pomocí fotocesty a mokrého leptání. DPS pro \acrshort{nspt} byly vyrobeny ve specializované firmě. Následně ručně vyrobené i průmyslově vyrobené DPS byla vlastnoručně osazena a pájela. Pro plastové krabičky byl navrhnut 3D model a následně vytisknuté na 3D tiskárně. Zapojení rozvaděče v~technické místnosti i jiných částech byla provedena vlastnoručně.

V průběhu práce se narazilo na několik problémů. První z~nich byl správné zvolení impedančního zakončení diferenciální I$^{2}$C sběrnice, které po několikátém předělání nyní funguje bez problémů. Při tisknutí 3D krabičky vznikl problém se správným vytvořením podpěr v oblasti distančních sloupků, aby krabička šla vytisknout. Optimální řešení by bylo krabičku vytisknout bez distančních sloupků, respektive zvlášť a následně je nalepit. V rámci softwaru do \acrshort{nspt} se objevilo několik problémů například správné nastavení obnovení komunikace s centrální jednotkou v případě výpadku (odpojení centrální jednotky nebo odpojení \acrshort{nspt}). Tyto problémy se podařilo vyřešit.

